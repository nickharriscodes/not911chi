<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Not 911 Chicago</title>
    <meta name="description" content="Providing alternatives to dialing 911 in Non-Emergency situations">
    <link rel="manifest" href="/manifest.webmanifest"/>
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Not 911 Chicago">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="Not 911 Chicago">
    <link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@500&display=swap" rel="stylesheet">
    <link rel="apple-touch-icon" href="img/N911logo.png">
    <link rel="shortcut icon" href="https://not911.s3.ca-central-1.amazonaws.com/favicon.ico">
    <script>
      if ("serviceWorker" in navigator) {
        navigator
          .serviceWorker
          .register("/service-worker.js")
          .then(function () {
            console.log("ServiceWorker has been registered!");
          })
          .catch(console.error);
      }
    </script>
  </head>
  <body>
    <div class="content-container">
      <header>
        <h1 class="home">
          <a class="rainbow-text" href="/">Not 911 Chicago</a>
        </h1>
      </header>

      <main>
        <h2>Life-threatening emergency?</h2>
<a href="tel:911" alt="Dial 911" class="emergency">Call 911</a>
<hr style="width:100%; height:3px; background-color: white;">

<h3>What do you need help with?</h3>
<div class="nav-container">
  <ul class="nav">
      <li class="nav-item">
        <a href="/violence/" class="entry-link">Violence
          ></a>
      </li>
      <li class="nav-item">
        <a href="/drugs/" class="entry-link">Drugs &amp; Poisoning
          ></a>
      </li>
      <li class="nav-item">
        <a href="/homelessness/" class="entry-link">Housing &amp; Homelessness
          ></a>
      </li>
      <li class="nav-item">
        <a href="/legal/" class="entry-link">Legal Support
          ></a>
      </li>
      <li class="nav-item">
        <a href="/mental-health/" class="entry-link">Mental Health
          ></a>
      </li>
  </ul>
</div>

      </main>
      <button class="add-button">Add to home screen</button>
      <a href="/how-to-add-app" class="add-button-ios">Add to home screen</a>
      <footer></footer>

      <!-- Current page: / -->
    </div>
    <script>
      let deferredPrompt;
      const addBtn = document.querySelector('.add-button');
      const addBtnIos = document.querySelector('.add-button-ios');
      addBtnIos.style.display = 'none';
      addBtn.style.display = 'none';
      window.addEventListener('beforeinstallprompt', (e) => {
        // Prevent Chrome 67 and earlier from automatically showing the prompt
        e.preventDefault();
        // Stash the event so it can be triggered later.
        deferredPrompt = e;
        // Update UI to notify the user they can add to home screen
        addBtn.style.display = 'block';

        addBtn.addEventListener('click', (e) => {
          // hide our user interface that shows our A2HS button
          addBtn.style.display = 'none';
          // Show the prompt
          deferredPrompt.prompt();
          // Wait for the user to respond to the prompt
          deferredPrompt
            .userChoice
            .then((choiceResult) => {
              if (choiceResult.outcome === 'accepted') {
                console.log('User accepted the A2HS prompt');
              } else {
                console.log('User dismissed the A2HS prompt');
              }
              deferredPrompt = null;
            });
        });
      });
      const isIos = () => {
        const userAgent = window
          .navigator
          .userAgent
          .toLowerCase();
        console.log(/iphone|ipad|ipod/.test(userAgent))
        return /iphone|ipad|ipod/.test(userAgent);
      }
      // Detects if device is in standalone mode
      const isInStandaloneMode = () => ('standalone' in window.navigator) && (window.navigator.standalone);

      // Checks if should display install popup notification:
      if (isIos() && !isInStandaloneMode()) {
        // offer app installation here
        addBtnIos.style.display = 'block';
        // link to menu explaining how to install
      }
    </script>
  </body>
</html>